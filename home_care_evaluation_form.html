<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alice Care | Home Care Evaluation Form</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: #E5ECF3; min-height: 100vh; padding: 20px; color: #3D3D3D; }
        .nav-bar { max-width: 1000px; margin: 0 auto 20px; background: white; padding: 15px 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(26, 54, 92, 0.1); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 10px; z-index: 100; flex-wrap: wrap; gap: 10px; }
        .logo { font-size: 24px; font-weight: 700; }
        .logo .alice { color: #F57600; }
        .logo .care { color: #1A365C; }
        .nav-actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(26, 54, 92, 0.15); overflow: hidden; }
        .header { background: #1A365C; color: white; padding: 25px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .header-content h1 { font-size: 22px; font-weight: 600; margin-bottom: 5px; }
        .header-content p { opacity: 0.9; font-size: 13px; }
        .header-date { background: rgba(255,255,255,0.1); padding: 12px 16px; border-radius: 8px; }
        .header-date label { font-size: 11px; opacity: 0.8; display: block; margin-bottom: 4px; }
        .header-date input { background: white; border: none; padding: 8px 12px; border-radius: 6px; font-family: 'Poppins', sans-serif; font-size: 13px; color: #1A365C; }
        .form-body { padding: 25px; }
        .section { margin-bottom: 30px; border: 2px solid #E5ECF3; border-radius: 10px; overflow: hidden; }
        .section-header { background: linear-gradient(135deg, #1A365C 0%, #2a4a7c 100%); color: white; padding: 12px 18px; font-size: 15px; font-weight: 600; }
        .section-header.orange { background: linear-gradient(135deg, #F57600 0%, #ff8c1a 100%); }
        .section-content { padding: 20px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        .form-grid-2 { grid-template-columns: repeat(2, 1fr); }
        .form-grid-3 { grid-template-columns: repeat(3, 1fr); }
        .form-group { display: flex; flex-direction: column; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-group label { font-size: 12px; color: #1A365C; font-weight: 500; margin-bottom: 5px; }
        .form-group label.required::after { content: " *"; color: #F57600; }
        .form-group input, .form-group select, .form-group textarea { padding: 10px 12px; border: 2px solid #D3D7DF; border-radius: 6px; font-size: 13px; font-family: 'Poppins', sans-serif; transition: all 0.3s; background: white; width: 100%; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #F57600; box-shadow: 0 0 0 3px rgba(245, 118, 0, 0.1); }
        .form-group textarea { min-height: 70px; resize: vertical; }
        .checkbox-group { display: flex; flex-wrap: wrap; gap: 12px; padding: 8px 0; }
        .checkbox-item { display: flex; align-items: center; gap: 6px; cursor: pointer; }
        .checkbox-item input { width: 16px; height: 16px; accent-color: #F57600; cursor: pointer; flex-shrink: 0; }
        .checkbox-item span { font-size: 13px; }
        .subsection { margin-top: 20px; padding-top: 15px; border-top: 2px dashed #E5ECF3; }
        .subsection-title { font-size: 13px; font-weight: 600; color: #1A365C; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .subsection-title::before { content: ""; width: 4px; height: 14px; background: #F57600; border-radius: 2px; }
        .care-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }
        .care-table th { background: #1A365C; color: white; padding: 10px 8px; text-align: center; font-size: 11px; font-weight: 500; }
        .care-table th:first-child { text-align: left; padding-left: 12px; }
        .care-table td { padding: 8px; border-bottom: 1px solid #E5ECF3; text-align: center; }
        .care-table td:first-child { text-align: left; padding-left: 12px; font-weight: 500; color: #1A365C; }
        .care-table input[type="radio"], .care-table input[type="checkbox"] { width: 16px; height: 16px; accent-color: #F57600; }
        .yes-no-group { display: flex; gap: 15px; align-items: center; }
        .yes-no-group label { display: flex; align-items: center; gap: 5px; cursor: pointer; font-size: 13px; }
        .inline-field { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .inline-field input { flex: 1; min-width: 120px; }
        .contact-card { background: #f8fafc; border-radius: 8px; padding: 15px; border: 1px solid #E5ECF3; }
        .contact-card-title { font-size: 13px; font-weight: 600; color: #F57600; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #F57600; }
        .btn { padding: 10px 20px; border: none; border-radius: 6px; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 13px; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 6px; }
        .btn-primary { background: #F57600; color: white; }
        .btn-primary:hover { background: #e06d00; transform: translateY(-1px); }
        .btn-secondary { background: #1A365C; color: white; }
        .btn-secondary:hover { background: #142947; }
        .btn-outline { background: transparent; color: #1A365C; border: 2px solid #1A365C; }
        .btn-outline:hover { background: #1A365C; color: white; }
        .btn-small { padding: 6px 12px; font-size: 12px; }
        .form-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; padding: 25px; background: #f8fafc; border-top: 2px solid #E5ECF3; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
        .modal-overlay.show { display: flex; }
        .modal { background: white; border-radius: 10px; max-width: 450px; width: 100%; max-height: 85vh; overflow-y: auto; }
        .modal-header { background: #1A365C; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { font-size: 16px; font-weight: 600; }
        .modal-close { background: none; border: none; color: white; font-size: 22px; cursor: pointer; line-height: 1; }
        .modal-body { padding: 20px; }
        .search-results { max-height: 250px; overflow-y: auto; margin-top: 12px; }
        .search-result-item { padding: 12px; border: 2px solid #E5ECF3; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s; }
        .search-result-item:hover { border-color: #F57600; background: #fff9f0; }
        .search-result-item h4 { color: #1A365C; font-size: 13px; margin-bottom: 4px; }
        .search-result-item p { color: #666; font-size: 11px; }
        .status-badge { padding: 4px 10px; border-radius: 15px; font-size: 11px; font-weight: 600; }
        .status-badge.new-mode { background: #e8f4ea; color: #2e7d32; }
        .status-badge.edit-mode { background: #FFF4E5; color: #F57600; }
        .edit-banner { background: #FFF4E5; border: 2px solid #F57600; border-radius: 8px; padding: 10px 15px; margin: 15px 20px 0; display: none; align-items: center; justify-content: space-between; gap: 10px; flex-wrap: wrap; }
        .edit-banner.show { display: flex; }
        .edit-banner-text { color: #F57600; font-weight: 600; font-size: 13px; }
        .loading { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 15px; color: #1A365C; }
        .spinner { width: 20px; height: 20px; border: 3px solid #E5ECF3; border-top-color: #F57600; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .toast { position: fixed; bottom: 20px; right: 20px; padding: 12px 20px; border-radius: 8px; color: white; font-weight: 500; font-size: 13px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transform: translateY(100px); opacity: 0; transition: all 0.3s; z-index: 2000; }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast.success { background: #2e7d32; }
        .toast.error { background: #c62828; }
        .toast.info { background: #1A365C; }
        .med-table { width: 100%; border-collapse: collapse; }
        .med-table th { background: #1A365C; color: white; padding: 8px 6px; text-align: left; font-size: 10px; font-weight: 500; }
        .med-table td { padding: 6px; border-bottom: 1px solid #E5ECF3; }
        .med-table input { width: 100%; padding: 6px; border: 1px solid #D3D7DF; border-radius: 4px; font-size: 11px; font-family: 'Poppins', sans-serif; }
        .schedule-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .schedule-day { text-align: center; }
        .schedule-day label { display: block; font-weight: 600; color: #1A365C; margin-bottom: 6px; font-size: 11px; }
        .schedule-day input[type="checkbox"] { margin-bottom: 6px; }
        .schedule-day input[type="time"] { width: 100%; padding: 4px; border: 1px solid #D3D7DF; border-radius: 4px; font-size: 10px; margin-bottom: 3px; }
        .risk-level { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 12px; }
        .risk-level-item { flex: 1; min-width: 150px; padding: 12px; border: 2px solid #E5ECF3; border-radius: 6px; cursor: pointer; transition: all 0.2s; }
        .risk-level-item:hover { border-color: #F57600; }
        .risk-level-item.selected { border-color: #F57600; background: #FFF4E5; }
        .risk-level-item input { display: none; }
        .risk-level-item .level-name { font-weight: 600; font-size: 13px; margin-bottom: 3px; }
        .risk-level-item.low .level-name { color: #2e7d32; }
        .risk-level-item.moderate .level-name { color: #F57600; }
        .risk-level-item.high .level-name { color: #c62828; }
        @media print { .nav-bar, .form-actions, .btn, .edit-banner { display: none !important; } .container { box-shadow: none; } }
        @media (max-width: 768px) { body { padding: 10px; } .nav-bar { flex-direction: column; position: relative; top: 0; } .header { flex-direction: column; text-align: center; } .form-grid, .form-grid-2, .form-grid-3 { grid-template-columns: 1fr; } .schedule-grid { grid-template-columns: repeat(2, 1fr); } .btn { width: 100%; justify-content: center; } .nav-actions { width: 100%; justify-content: center; } .contact-card { margin-bottom: 15px; } .edit-banner { flex-direction: column; text-align: center; } }
    </style>
</head>
<body>
    <div class="nav-bar">
        <div class="logo"><span class="alice">alice</span>.<span class="care">care</span></div>
        <div class="nav-actions">
            <span id="modeStatus" class="status-badge new-mode">New Evaluation</span>
            <button class="btn btn-outline btn-small" onclick="openSearchModal()">Search & Edit</button>
        </div>
    </div>

    <div class="container">
        <div class="edit-banner" id="editBanner">
            <span class="edit-banner-text" id="editBannerText">Editing record</span>
            <button class="btn btn-small btn-primary" onclick="exitEditMode()">Exit Edit Mode</button>
        </div>
        
        <div class="header">
            <div class="header-content">
                <h1>Home Care Evaluation Form</h1>
                <p>Comprehensive client assessment</p>
            </div>
            <div class="header-date">
                <label>Evaluation Date</label>
                <input type="date" id="evaluationDate">
            </div>
        </div>

        <form id="evaluationForm" class="form-body">
            <!-- Client Personal Information -->
            <div class="section">
                <div class="section-header">Client Personal Information</div>
                <div class="section-content">
                    <div class="form-grid">
                        <div class="form-group"><label class="required">First Name</label><input type="text" name="firstName" required></div>
                        <div class="form-group"><label class="required">Last Name</label><input type="text" name="lastName" required></div>
                        <div class="form-group"><label>Gender</label><select name="gender"><option value="">Select...</option><option value="Male">Male</option><option value="Female">Female</option><option value="Other">Other</option></select></div>
                        <div class="form-group"><label>Date of Birth</label><input type="date" name="dob"></div>
                        <div class="form-group"><label>Age</label><input type="number" name="age"></div>
                        <div class="form-group"><label>Marital Status</label><select name="maritalStatus"><option value="">Select...</option><option value="Married">Married</option><option value="Single">Single</option><option value="Divorced">Divorced</option><option value="Widow">Widow</option></select></div>
                        <div class="form-group"><label>Unit/Apt #</label><input type="text" name="unitNumber"></div>
                        <div class="form-group full-width"><label>Street Address</label><input type="text" name="streetAddress"></div>
                        <div class="form-group"><label>City</label><input type="text" name="city"></div>
                        <div class="form-group"><label>State</label><input type="text" name="state" value="CA"></div>
                        <div class="form-group"><label>Zip Code</label><input type="text" name="zipCode"></div>
                        <div class="form-group"><label>Phone</label><input type="tel" name="phone"></div>
                        <div class="form-group"><label>First Language</label><input type="text" name="firstLanguage"></div>
                        <div class="form-group"><label>2nd Language</label><input type="text" name="secondLanguage"></div>
                        <div class="form-group"><label>Height</label><input type="text" name="height"></div>
                        <div class="form-group"><label>Weight</label><input type="text" name="weight"></div>
                    </div>
                </div>
            </div>

            <!-- Authorized Contacts -->
            <div class="section">
                <div class="section-header orange">Authorized Contacts</div>
                <div class="section-content">
                    <div class="form-grid form-grid-2" style="gap: 20px;">
                        <div class="contact-card">
                            <div class="contact-card-title">Primary Contact</div>
                            <div class="form-grid" style="gap: 12px;">
                                <div class="form-group"><label>First Name</label><input type="text" name="primaryFirstName"></div>
                                <div class="form-group"><label>Last Name</label><input type="text" name="primaryLastName"></div>
                                <div class="form-group full-width"><label>Relation</label><input type="text" name="primaryRelation"></div>
                                <div class="form-group full-width"><label>Address</label><input type="text" name="primaryAddress"></div>
                                <div class="form-group"><label>Cell</label><input type="tel" name="primaryCellPhone"></div>
                                <div class="form-group"><label>Home</label><input type="tel" name="primaryHomePhone"></div>
                                <div class="form-group"><label>Work</label><input type="tel" name="primaryWorkPhone"></div>
                                <div class="form-group"><label>Email</label><input type="email" name="primaryEmail"></div>
                            </div>
                        </div>
                        <div class="contact-card">
                            <div class="contact-card-title">Secondary Contact</div>
                            <div class="form-grid" style="gap: 12px;">
                                <div class="form-group"><label>First Name</label><input type="text" name="secondaryFirstName"></div>
                                <div class="form-group"><label>Last Name</label><input type="text" name="secondaryLastName"></div>
                                <div class="form-group full-width"><label>Relation</label><input type="text" name="secondaryRelation"></div>
                                <div class="form-group full-width"><label>Location</label><input type="text" name="secondaryLocation"></div>
                                <div class="form-group"><label>Phone</label><input type="tel" name="secondaryPhone"></div>
                                <div class="form-group"><label>Email</label><input type="email" name="secondaryEmail"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Communication -->
            <div class="section">
                <div class="section-header">Communication Details</div>
                <div class="section-content">
                    <div class="form-group full-width">
                        <label>Communication Methods</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item"><input type="checkbox" name="commPhone"><span>Phone</span></label>
                            <label class="checkbox-item"><input type="checkbox" name="commEmail"><span>Email</span></label>
                            <label class="checkbox-item"><input type="checkbox" name="commVideoChat"><span>Video Chat</span></label>
                        </div>
                    </div>
                    <div class="form-grid" style="margin-top: 15px;">
                        <div class="form-group"><label>Has landline?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasLandline" value="Yes"> Yes</label><label><input type="radio" name="hasLandline" value="No"> No</label></div><input type="tel" name="landlineNumber" placeholder="#"></div></div>
                        <div class="form-group"><label>Has cell phone?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasCellphone" value="Yes"> Yes</label><label><input type="radio" name="hasCellphone" value="No"> No</label></div><input type="tel" name="cellNumber" placeholder="#"></div></div>
                        <div class="form-group"><label>Owns computer?</label><div class="yes-no-group"><label><input type="radio" name="ownsComputer" value="Yes"> Yes</label><label><input type="radio" name="ownsComputer" value="No"> No</label></div></div>
                        <div class="form-group"><label>Can operate it?</label><div class="yes-no-group"><label><input type="radio" name="canOperateComputer" value="Yes"> Yes</label><label><input type="radio" name="canOperateComputer" value="No"> No</label></div></div>
                        <div class="form-group"><label>Can access email?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="canAccessEmail" value="Yes"> Yes</label><label><input type="radio" name="canAccessEmail" value="No"> No</label></div><input type="email" name="clientEmail" placeholder="Email"></div></div>
                        <div class="form-group"><label>Has WiFi?</label><div class="yes-no-group"><label><input type="radio" name="hasWifi" value="Yes"> Yes</label><label><input type="radio" name="hasWifi" value="No"> No</label></div></div>
                        <div class="form-group"><label>WiFi Network</label><input type="text" name="wifiNetwork"></div>
                        <div class="form-group"><label>WiFi Password</label><input type="text" name="wifiPassword"></div>
                    </div>
                </div>
            </div>

            <!-- Living Situation -->
            <div class="section">
                <div class="section-header orange">Living Situation</div>
                <div class="section-content">
                    <div class="form-grid form-grid-2">
                        <div class="form-group">
                            <label>Current Living Arrangement</label>
                            <div class="checkbox-group" style="flex-direction: column; align-items: flex-start;">
                                <label class="checkbox-item"><input type="radio" name="livingArrangement" value="Lives at home alone"><span>Lives at home alone</span></label>
                                <label class="checkbox-item"><input type="radio" name="livingArrangement" value="Lives with family/friend"><span>Lives with family/friend</span></label>
                                <label class="checkbox-item"><input type="radio" name="livingArrangement" value="Senior residence"><span>Senior residence</span></label>
                                <label class="checkbox-item"><input type="radio" name="livingArrangement" value="Care facility"><span>Care facility</span></label>
                                <label class="checkbox-item"><input type="radio" name="livingArrangement" value="Hospital/Rehab"><span>Hospital/Rehab</span></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Level of Care Assistance</label>
                            <div class="checkbox-group" style="flex-direction: column; align-items: flex-start;">
                                <label class="checkbox-item"><input type="radio" name="careLevel" value="Autonomous"><span>Autonomous</span></label>
                                <label class="checkbox-item"><input type="radio" name="careLevel" value="Semi-autonomous"><span>Semi-autonomous</span></label>
                                <label class="checkbox-item"><input type="radio" name="careLevel" value="Assisted"><span>Assisted</span></label>
                                <label class="checkbox-item"><input type="radio" name="careLevel" value="Long term"><span>Long term</span></label>
                                <label class="checkbox-item"><input type="radio" name="careLevel" value="Memory Care"><span>Memory Care</span></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Care Requirements -->
            <div class="section">
                <div class="section-header">Care Requirements</div>
                <div class="section-content">
                    <div class="subsection-title">Personal Care</div>
                    <table class="care-table">
                        <thead><tr><th>Activity</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                        <tbody>
                            <tr><td>Bathing/Showering</td><td><input type="radio" name="bathingAssist" value="Full"></td><td><input type="radio" name="bathingAssist" value="Partial"></td><td><input type="radio" name="bathingAssist" value="Standby"></td><td><input type="radio" name="bathingAssist" value="None"></td></tr>
                            <tr><td>Hair Care</td><td><input type="radio" name="hairAssist" value="Full"></td><td><input type="radio" name="hairAssist" value="Partial"></td><td><input type="radio" name="hairAssist" value="Standby"></td><td><input type="radio" name="hairAssist" value="None"></td></tr>
                            <tr><td>Shaving</td><td><input type="radio" name="shavingAssist" value="Full"></td><td><input type="radio" name="shavingAssist" value="Partial"></td><td><input type="radio" name="shavingAssist" value="Standby"></td><td><input type="radio" name="shavingAssist" value="None"></td></tr>
                            <tr><td>Dressing/Undressing</td><td><input type="radio" name="dressingAssist" value="Full"></td><td><input type="radio" name="dressingAssist" value="Partial"></td><td><input type="radio" name="dressingAssist" value="Standby"></td><td><input type="radio" name="dressingAssist" value="None"></td></tr>
                            <tr><td>Toileting</td><td><input type="radio" name="toiletingAssist" value="Full"></td><td><input type="radio" name="toiletingAssist" value="Partial"></td><td><input type="radio" name="toiletingAssist" value="Standby"></td><td><input type="radio" name="toiletingAssist" value="None"></td></tr>
                            <tr><td>Cream Application</td><td><input type="radio" name="creamAssist" value="Full"></td><td><input type="radio" name="creamAssist" value="Partial"></td><td><input type="radio" name="creamAssist" value="Standby"></td><td><input type="radio" name="creamAssist" value="None"></td></tr>
                            <tr><td>Make-up</td><td><input type="radio" name="makeupAssist" value="Full"></td><td><input type="radio" name="makeupAssist" value="Partial"></td><td><input type="radio" name="makeupAssist" value="Standby"></td><td><input type="radio" name="makeupAssist" value="None"></td></tr>
                            <tr><td>Fingernails</td><td><input type="radio" name="fingernailsAssist" value="Full"></td><td><input type="radio" name="fingernailsAssist" value="Partial"></td><td><input type="radio" name="fingernailsAssist" value="Standby"></td><td><input type="radio" name="fingernailsAssist" value="None"></td></tr>
                            <tr><td>Toenails</td><td><input type="radio" name="toenailsAssist" value="Full"></td><td><input type="radio" name="toenailsAssist" value="Partial"></td><td><input type="radio" name="toenailsAssist" value="Standby"></td><td><input type="radio" name="toenailsAssist" value="None"></td></tr>
                            <tr><td>Jewelry</td><td><input type="radio" name="jewelryAssist" value="Full"></td><td><input type="radio" name="jewelryAssist" value="Partial"></td><td><input type="radio" name="jewelryAssist" value="Standby"></td><td><input type="radio" name="jewelryAssist" value="None"></td></tr>
                        </tbody>
                    </table>

                    <div class="subsection">
                        <div class="subsection-title">Meals</div>
                        <table class="care-table">
                            <thead><tr><th>Activity</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                            <tbody>
                                <tr><td>Prepare Meals</td><td><input type="radio" name="prepareMealsAssist" value="Full"></td><td><input type="radio" name="prepareMealsAssist" value="Partial"></td><td><input type="radio" name="prepareMealsAssist" value="Standby"></td><td><input type="radio" name="prepareMealsAssist" value="None"></td></tr>
                                <tr><td>Prepare Snacks</td><td><input type="radio" name="prepareSnacksAssist" value="Full"></td><td><input type="radio" name="prepareSnacksAssist" value="Partial"></td><td><input type="radio" name="prepareSnacksAssist" value="Standby"></td><td><input type="radio" name="prepareSnacksAssist" value="None"></td></tr>
                                <tr><td>Hot Drinks</td><td><input type="radio" name="hotDrinksAssist" value="Full"></td><td><input type="radio" name="hotDrinksAssist" value="Partial"></td><td><input type="radio" name="hotDrinksAssist" value="Standby"></td><td><input type="radio" name="hotDrinksAssist" value="None"></td></tr>
                                <tr><td>Water Intake</td><td><input type="radio" name="drinkAssist" value="Full"></td><td><input type="radio" name="drinkAssist" value="Partial"></td><td><input type="radio" name="drinkAssist" value="Standby"></td><td><input type="radio" name="drinkAssist" value="None"></td></tr>
                                <tr><td>Set/Clear Table</td><td><input type="radio" name="setTableAssist" value="Full"></td><td><input type="radio" name="setTableAssist" value="Partial"></td><td><input type="radio" name="setTableAssist" value="Standby"></td><td><input type="radio" name="setTableAssist" value="None"></td></tr>
                                <tr><td>Clean Up after Meal</td><td><input type="radio" name="cleanMealAssist" value="Full"></td><td><input type="radio" name="cleanMealAssist" value="Partial"></td><td><input type="radio" name="cleanMealAssist" value="Standby"></td><td><input type="radio" name="cleanMealAssist" value="None"></td></tr>
                                <tr><td>Cueing for Eating</td><td><input type="radio" name="cueEatAssist" value="Full"></td><td><input type="radio" name="cueEatAssist" value="Partial"></td><td><input type="radio" name="cueEatAssist" value="Standby"></td><td><input type="radio" name="cueEatAssist" value="None"></td></tr>
                                <tr><td>Rotate Food</td><td><input type="radio" name="rotateFoodAssist" value="Full"></td><td><input type="radio" name="rotateFoodAssist" value="Partial"></td><td><input type="radio" name="rotateFoodAssist" value="Standby"></td><td><input type="radio" name="rotateFoodAssist" value="None"></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Home Environment</div>
                        <table class="care-table">
                            <thead><tr><th>Activity</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                            <tbody>
                                <tr><td>Bed Making/Sheets</td><td><input type="radio" name="sheetsAssist" value="Full"></td><td><input type="radio" name="sheetsAssist" value="Partial"></td><td><input type="radio" name="sheetsAssist" value="Standby"></td><td><input type="radio" name="sheetsAssist" value="None"></td></tr>
                                <tr><td>Surface Cleaning</td><td><input type="radio" name="surfaceCleanAssist" value="Full"></td><td><input type="radio" name="surfaceCleanAssist" value="Partial"></td><td><input type="radio" name="surfaceCleanAssist" value="Standby"></td><td><input type="radio" name="surfaceCleanAssist" value="None"></td></tr>
                                <tr><td>Washroom Cleaning</td><td><input type="radio" name="bathroomCleanAssist" value="Full"></td><td><input type="radio" name="bathroomCleanAssist" value="Partial"></td><td><input type="radio" name="bathroomCleanAssist" value="Standby"></td><td><input type="radio" name="bathroomCleanAssist" value="None"></td></tr>
                                <tr><td>Laundry/Ironing</td><td><input type="radio" name="laundryAssist" value="Full"></td><td><input type="radio" name="laundryAssist" value="Partial"></td><td><input type="radio" name="laundryAssist" value="Standby"></td><td><input type="radio" name="laundryAssist" value="None"></td></tr>
                                <tr><td>Garbage Removal</td><td><input type="radio" name="garbageAssist" value="Full"></td><td><input type="radio" name="garbageAssist" value="Partial"></td><td><input type="radio" name="garbageAssist" value="Standby"></td><td><input type="radio" name="garbageAssist" value="None"></td></tr>
                                <tr><td>Yard Maintenance</td><td><input type="radio" name="yardAssist" value="Full"></td><td><input type="radio" name="yardAssist" value="Partial"></td><td><input type="radio" name="yardAssist" value="Standby"></td><td><input type="radio" name="yardAssist" value="None"></td></tr>
                                <tr><td>Organizing</td><td><input type="radio" name="organizingAssist" value="Full"></td><td><input type="radio" name="organizingAssist" value="Partial"></td><td><input type="radio" name="organizingAssist" value="Standby"></td><td><input type="radio" name="organizingAssist" value="None"></td></tr>
                                <tr><td>Pet Assistance</td><td><input type="radio" name="petAssistance" value="Full"></td><td><input type="radio" name="petAssistance" value="Partial"></td><td><input type="radio" name="petAssistance" value="Standby"></td><td><input type="radio" name="petAssistance" value="None"></td></tr>
                                <tr><td>Tech Assistance</td><td><input type="radio" name="techAssist" value="Full"></td><td><input type="radio" name="techAssist" value="Partial"></td><td><input type="radio" name="techAssist" value="Standby"></td><td><input type="radio" name="techAssist" value="None"></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Activity/Movement</div>
                        <table class="care-table">
                            <thead><tr><th>Activity</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                            <tbody>
                                <tr><td>Exercise/Physio</td><td><input type="radio" name="exerciseAssist" value="Full"></td><td><input type="radio" name="exerciseAssist" value="Partial"></td><td><input type="radio" name="exerciseAssist" value="Standby"></td><td><input type="radio" name="exerciseAssist" value="None"></td></tr>
                                <tr><td>Walking Indoors</td><td><input type="radio" name="walkIndoorsAssist" value="Full"></td><td><input type="radio" name="walkIndoorsAssist" value="Partial"></td><td><input type="radio" name="walkIndoorsAssist" value="Standby"></td><td><input type="radio" name="walkIndoorsAssist" value="None"></td></tr>
                                <tr><td>Walking Outdoors</td><td><input type="radio" name="walkOutdoorsAssist" value="Full"></td><td><input type="radio" name="walkOutdoorsAssist" value="Partial"></td><td><input type="radio" name="walkOutdoorsAssist" value="Standby"></td><td><input type="radio" name="walkOutdoorsAssist" value="None"></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Housekeeping Tasks</div>
                        <table class="care-table">
                            <thead><tr><th>Task</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                            <tbody>
                                <tr><td>Bed Making</td><td><input type="radio" name="bedAssist" value="Full"></td><td><input type="radio" name="bedAssist" value="Partial"></td><td><input type="radio" name="bedAssist" value="Standby"></td><td><input type="radio" name="bedAssist" value="None"></td></tr>
                                <tr><td>Bathroom Access</td><td><input type="radio" name="bathroomAccessAssist" value="Full"></td><td><input type="radio" name="bathroomAccessAssist" value="Partial"></td><td><input type="radio" name="bathroomAccessAssist" value="Standby"></td><td><input type="radio" name="bathroomAccessAssist" value="None"></td></tr>
                                <tr><td>Stairs</td><td><input type="radio" name="stairsAssist" value="Full"></td><td><input type="radio" name="stairsAssist" value="Partial"></td><td><input type="radio" name="stairsAssist" value="Standby"></td><td><input type="radio" name="stairsAssist" value="None"></td></tr>
                                <tr><td>Basement</td><td><input type="radio" name="basementAssist" value="Full"></td><td><input type="radio" name="basementAssist" value="Partial"></td><td><input type="radio" name="basementAssist" value="Standby"></td><td><input type="radio" name="basementAssist" value="None"></td></tr>
                                <tr><td>Chairs</td><td><input type="radio" name="chairsAssist" value="Full"></td><td><input type="radio" name="chairsAssist" value="Partial"></td><td><input type="radio" name="chairsAssist" value="Standby"></td><td><input type="radio" name="chairsAssist" value="None"></td></tr>
                                <tr><td>Answering Phone</td><td><input type="radio" name="phoneAnswerAssist" value="Full"></td><td><input type="radio" name="phoneAnswerAssist" value="Partial"></td><td><input type="radio" name="phoneAnswerAssist" value="Standby"></td><td><input type="radio" name="phoneAnswerAssist" value="None"></td></tr>
                                <tr><td>Door</td><td><input type="radio" name="doorAssist" value="Full"></td><td><input type="radio" name="doorAssist" value="Partial"></td><td><input type="radio" name="doorAssist" value="Standby"></td><td><input type="radio" name="doorAssist" value="None"></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Social Engagement</div>
                        <table class="care-table">
                            <thead><tr><th>Activity</th><th>Full</th><th>Partial</th><th>Standby</th><th>None</th></tr></thead>
                            <tbody>
                                <tr><td>Mental Engagement</td><td><input type="radio" name="mentalEngageAssist" value="Full"></td><td><input type="radio" name="mentalEngageAssist" value="Partial"></td><td><input type="radio" name="mentalEngageAssist" value="Standby"></td><td><input type="radio" name="mentalEngageAssist" value="None"></td></tr>
                                <tr><td>Physical Participate</td><td><input type="radio" name="physicalParticipateAssist" value="Full"></td><td><input type="radio" name="physicalParticipateAssist" value="Partial"></td><td><input type="radio" name="physicalParticipateAssist" value="Standby"></td><td><input type="radio" name="physicalParticipateAssist" value="None"></td></tr>
                                <tr><td>Willing to Participate</td><td><input type="radio" name="willingParticipateAssist" value="Full"></td><td><input type="radio" name="willingParticipateAssist" value="Partial"></td><td><input type="radio" name="willingParticipateAssist" value="Standby"></td><td><input type="radio" name="willingParticipateAssist" value="None"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Hearing & Vision -->
            <div class="section">
                <div class="section-header orange">Hearing & Vision</div>
                <div class="section-content">
                    <div class="form-grid form-grid-2">
                        <div>
                            <div class="subsection-title">Vision Issues</div>
                            <div class="checkbox-group" style="flex-direction: column;">
                                <label class="checkbox-item"><input type="checkbox" name="cataractLeft"><span>Cataracts (Left)</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="cataractRight"><span>Cataracts (Right)</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="cataractBoth"><span>Cataracts (Both)</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="lensLeft"><span>Lens Implant (Left)</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="lensRight"><span>Lens Implant (Right)</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="lensBoth"><span>Lens Implant (Both)</span></label>
                            </div>
                            <div class="subsection-title" style="margin-top: 15px;">Vision Assistance</div>
                            <div class="checkbox-group" style="flex-direction: column;">
                                <label class="checkbox-item"><input type="checkbox" name="visionAssistLeft"><span>Left Eye</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="visionAssistRight"><span>Right Eye</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="visionAssistBoth"><span>Both Eyes</span></label>
                            </div>
                        </div>
                        <div>
                            <div class="subsection-title">Hearing Aids</div>
                            <div class="checkbox-group" style="flex-direction: column;">
                                <label class="checkbox-item"><input type="checkbox" name="hearingAidLeft"><span>Left Ear</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="hearingAidRight"><span>Right Ear</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="hearingAidBoth"><span>Both Ears</span></label>
                            </div>
                            <div class="subsection-title" style="margin-top: 15px;">Hearing Assistance</div>
                            <div class="checkbox-group" style="flex-direction: column;">
                                <label class="checkbox-item"><input type="checkbox" name="hearingAssistLeft"><span>Left Ear</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="hearingAssistRight"><span>Right Ear</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="hearingAssistBoth"><span>Both Ears</span></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reminders & Mobility -->
            <div class="section">
                <div class="section-header">Reminders & Mobility</div>
                <div class="section-content">
                    <div class="form-grid form-grid-2">
                        <div class="form-group"><label>Medication reminders needed?</label><div class="yes-no-group"><label><input type="radio" name="medicationReminders" value="Yes"> Yes</label><label><input type="radio" name="medicationReminders" value="No"> No</label></div></div>
                        <div class="form-group"><label>Appointment reminders needed?</label><div class="yes-no-group"><label><input type="radio" name="appointmentReminders" value="Yes"> Yes</label><label><input type="radio" name="appointmentReminders" value="No"> No</label></div></div>
                    </div>
                    <div class="subsection-title" style="margin-top: 15px;">Mobility Aid</div>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" name="mobilityNoAssist"><span>No Assistance</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="mobilityCane"><span>Cane</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="mobilityWalker"><span>Walker</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="mobilityWheelchair"><span>Wheelchair</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="mobilityLift"><span>Lift</span></label>
                    </div>
                </div>
            </div>

            <!-- Home Environment -->
            <div class="section">
                <div class="section-header orange">Home Environment</div>
                <div class="section-content">
                    <div class="form-grid">
                        <div class="form-group"><label>Street level access?</label><div class="yes-no-group"><label><input type="radio" name="streetLevelAccessible" value="Yes"> Yes</label><label><input type="radio" name="streetLevelAccessible" value="No"> No</label></div></div>
                        <div class="form-group"><label>Street Access Details</label><input type="text" name="streetAccessDetails"></div>
                        <div class="form-group"><label>Stairs?</label><div class="yes-no-group"><label><input type="radio" name="stairsPresent" value="Yes"> Yes</label><label><input type="radio" name="stairsPresent" value="No"> No</label></div></div>
                        <div class="form-group"><label>Railings?</label><div class="yes-no-group"><label><input type="radio" name="stairsRailings" value="Yes"> Yes</label><label><input type="radio" name="stairsRailings" value="No"> No</label></div></div>
                        <div class="form-group"><label>Floor Levels</label><input type="text" name="floorLevels"></div>
                        <div class="form-group"><label>Easy bathroom access?</label><div class="yes-no-group"><label><input type="radio" name="easyBathroomAccess" value="Yes"> Yes</label><label><input type="radio" name="easyBathroomAccess" value="No"> No</label></div></div>
                        <div class="form-group"><label>Bath/Shower accessible?</label><div class="yes-no-group"><label><input type="radio" name="bathAccess" value="Yes"> Yes</label><label><input type="radio" name="bathAccess" value="No"> No</label></div></div>
                        <div class="form-group"><label>Bath Access Details</label><input type="text" name="bathAccessDetails"></div>
                        <div class="form-group"><label>Pets?</label><div class="yes-no-group"><label><input type="radio" name="hasPets" value="Yes"> Yes</label><label><input type="radio" name="hasPets" value="No"> No</label></div></div>
                        <div class="form-group"><label>Street Access?</label><div class="yes-no-group"><label><input type="radio" name="streetAccess" value="Yes"> Yes</label><label><input type="radio" name="streetAccess" value="No"> No</label></div></div>
                        <div class="form-group"><label>Washroom Access?</label><div class="yes-no-group"><label><input type="radio" name="washroomAccess" value="Yes"> Yes</label><label><input type="radio" name="washroomAccess" value="No"> No</label></div></div>
                        <div class="form-group"><label>Washroom Details</label><input type="text" name="washroomAccessDetails"></div>
                        <div class="form-group"><label>Spare key?</label><div class="yes-no-group"><label><input type="radio" name="hasSpareKey" value="Yes"> Yes</label><label><input type="radio" name="hasSpareKey" value="No"> No</label></div></div>
                        <div class="form-group"><label>Key Location</label><input type="text" name="spareKeyLocation"></div>
                        <div class="form-group full-width"><label>Environmental Concerns?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="envConcerns" value="Yes"> Yes</label><label><input type="radio" name="envConcerns" value="No"> No</label></div><input type="text" name="envConcernsList" placeholder="List concerns"></div></div>
                        <div class="form-group full-width"><label>Home Environment Comments</label><textarea name="homeEnvComments"></textarea></div>
                    </div>
                </div>
            </div>

            <!-- Fall Risk Assessment -->
            <div class="section">
                <div class="section-header">Fall Risk Assessment</div>
                <div class="section-content">
                    <div class="subsection-title">Recent Falls</div>
                    <div class="form-grid">
                        <div class="form-group"><label>Had recent falls?</label><div class="yes-no-group"><label><input type="radio" name="hadFalls" value="Yes"> Yes</label><label><input type="radio" name="hadFalls" value="No"> No</label></div></div>
                        <div class="form-group"><label>Where?</label><input type="text" name="recentFallInfo"></div>
                        <div class="form-group"><label>Aware of cause?</label><div class="yes-no-group"><label><input type="radio" name="awareFallCause" value="Yes"> Yes</label><label><input type="radio" name="awareFallCause" value="No"> No</label></div></div>
                        <div class="form-group"><label>Aware of limitations?</label><div class="yes-no-group"><label><input type="radio" name="awareLimitations" value="Yes"> Yes</label><label><input type="radio" name="awareLimitations" value="No"> No</label></div></div>
                        <div class="form-group"><label>Aware of hazards?</label><div class="yes-no-group"><label><input type="radio" name="awareObjects" value="Yes"> Yes</label><label><input type="radio" name="awareObjects" value="No"> No</label></div></div>
                        <div class="form-group"><label>Observation level</label><select name="observationLevel"><option value="">Select...</option><option value="Minimal">Minimal</option><option value="Moderate">Moderate</option><option value="Constant">Constant</option></select></div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Medications Impact</div>
                        <div class="form-grid form-grid-2">
                            <div class="form-group"><label>Recent medication changes?</label><div class="yes-no-group"><label><input type="radio" name="recentMedChanges" value="Yes"> Yes</label><label><input type="radio" name="recentMedChanges" value="No"> No</label></div></div>
                            <div class="form-group"><label>Meds causing dizziness?</label><div class="yes-no-group"><label><input type="radio" name="medsDizziness" value="Yes"> Yes</label><label><input type="radio" name="medsDizziness" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Vision Assessment</div>
                        <div class="form-grid">
                            <div class="form-group"><label>Glasses reviewed?</label><div class="yes-no-group"><label><input type="radio" name="glassesReview" value="Yes"> Yes</label><label><input type="radio" name="glassesReview" value="No"> No</label></div></div>
                            <div class="form-group"><label>Depth perception issues?</label><div class="yes-no-group"><label><input type="radio" name="depthPerception" value="Yes"> Yes</label><label><input type="radio" name="depthPerception" value="No"> No</label></div></div>
                            <div class="form-group"><label>Peripheral vision issues?</label><div class="yes-no-group"><label><input type="radio" name="peripheralVision" value="Yes"> Yes</label><label><input type="radio" name="peripheralVision" value="No"> No</label></div></div>
                            <div class="form-group"><label>Rooms well lit?</label><div class="yes-no-group"><label><input type="radio" name="roomsWellLit" value="Yes"> Yes</label><label><input type="radio" name="roomsWellLit" value="No"> No</label></div></div>
                            <div class="form-group"><label>Entrance clear?</label><div class="yes-no-group"><label><input type="radio" name="entranceClear" value="Yes"> Yes</label><label><input type="radio" name="entranceClear" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Hearing Assessment</div>
                        <div class="form-grid form-grid-2">
                            <div class="form-group"><label>Has hearing aids?</label><div class="yes-no-group"><label><input type="radio" name="hasHearingAids" value="Yes"> Yes</label><label><input type="radio" name="hasHearingAids" value="No"> No</label></div></div>
                            <div class="form-group"><label>Hears conversations?</label><div class="yes-no-group"><label><input type="radio" name="hearConversations" value="Yes"> Yes</label><label><input type="radio" name="hearConversations" value="No"> No</label></div></div>
                            <div class="form-group"><label>Resistant to hearing aids?</label><div class="yes-no-group"><label><input type="radio" name="resistantHearingAids" value="Yes"> Yes</label><label><input type="radio" name="resistantHearingAids" value="No"> No</label></div></div>
                            <div class="form-group"><label>Seen audiologist?</label><div class="yes-no-group"><label><input type="radio" name="seenAudiologist" value="Yes"> Yes</label><label><input type="radio" name="seenAudiologist" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Mobility Assessment</div>
                        <div class="form-grid">
                            <div class="form-group"><label>Uses mobility aid?</label><div class="yes-no-group"><label><input type="radio" name="walkingAssist" value="Yes"> Yes</label><label><input type="radio" name="walkingAssist" value="No"> No</label></div></div>
                            <div class="form-group"><label>Aid working properly?</label><div class="yes-no-group"><label><input type="radio" name="mobilityAidWorking" value="Yes"> Yes</label><label><input type="radio" name="mobilityAidWorking" value="No"> No</label><label><input type="radio" name="mobilityAidWorking" value="N/A"> N/A</label></div></div>
                            <div class="form-group"><label>Aid appropriate?</label><div class="yes-no-group"><label><input type="radio" name="mobilityAidAppropriate" value="Yes"> Yes</label><label><input type="radio" name="mobilityAidAppropriate" value="No"> No</label><label><input type="radio" name="mobilityAidAppropriate" value="N/A"> N/A</label></div></div>
                            <div class="form-group"><label>Can operate aid?</label><div class="yes-no-group"><label><input type="radio" name="canOperateMobilityAid" value="Yes"> Yes</label><label><input type="radio" name="canOperateMobilityAid" value="No"> No</label><label><input type="radio" name="canOperateMobilityAid" value="N/A"> N/A</label></div></div>
                            <div class="form-group"><label>Can dress independently?</label><div class="yes-no-group"><label><input type="radio" name="canDressUndress" value="Yes"> Yes</label><label><input type="radio" name="canDressUndress" value="No"> No</label></div></div>
                            <div class="form-group"><label>Needs walking help?</label><div class="yes-no-group"><label><input type="radio" name="needsWalkAssist" value="Yes"> Yes</label><label><input type="radio" name="needsWalkAssist" value="No"> No</label></div></div>
                            <div class="form-group"><label>Can stand 10 sec?</label><div class="yes-no-group"><label><input type="radio" name="canStand10Sec" value="Yes"> Yes</label><label><input type="radio" name="canStand10Sec" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Physical Environment</div>
                        <div class="form-grid">
                            <div class="form-group"><label>Has rugs (fall hazard)?</label><div class="yes-no-group"><label><input type="radio" name="hasRugs" value="Yes"> Yes</label><label><input type="radio" name="hasRugs" value="No"> No</label></div></div>
                            <div class="form-group"><label>Has stairs?</label><div class="yes-no-group"><label><input type="radio" name="hasStairs" value="Yes"> Yes</label><label><input type="radio" name="hasStairs" value="No"> No</label></div></div>
                            <div class="form-group"><label>Safe toilet access?</label><div class="yes-no-group"><label><input type="radio" name="safeToiletAccess" value="Yes"> Yes</label><label><input type="radio" name="safeToiletAccess" value="No"> No</label></div></div>
                            <div class="form-group"><label>Safe bed access?</label><div class="yes-no-group"><label><input type="radio" name="safeBedAccess" value="Yes"> Yes</label><label><input type="radio" name="safeBedAccess" value="No"> No</label></div></div>
                            <div class="form-group full-width"><label>Comfort place?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasComfortPlace" value="Yes"> Yes</label><label><input type="radio" name="hasComfortPlace" value="No"> No</label></div><input type="text" name="comfortPlaceDetails" placeholder="Location"></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Behaviours</div>
                        <div class="form-grid form-grid-3">
                            <div class="form-group"><label>Client paces?</label><div class="yes-no-group"><label><input type="radio" name="paces" value="Yes"> Yes</label><label><input type="radio" name="paces" value="No"> No</label></div></div>
                            <div class="form-group"><label>Easily agitated?</label><div class="yes-no-group"><label><input type="radio" name="easilyAgitated" value="Yes"> Yes</label><label><input type="radio" name="easilyAgitated" value="No"> No</label></div></div>
                            <div class="form-group"><label>Asks for help?</label><div class="yes-no-group"><label><input type="radio" name="willingAskHelp" value="Yes"> Yes</label><label><input type="radio" name="willingAskHelp" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Bladder/Bowel</div>
                        <div class="form-grid form-grid-3">
                            <div class="form-group"><label>Frequent bathroom?</label><div class="yes-no-group"><label><input type="radio" name="frequentBathroom" value="Yes"> Yes</label><label><input type="radio" name="frequentBathroom" value="No"> No</label></div></div>
                            <div class="form-group"><label>Incontinence?</label><div class="yes-no-group"><label><input type="radio" name="incontinence" value="Yes"> Yes</label><label><input type="radio" name="incontinence" value="No"> No</label></div></div>
                            <div class="form-group"><label>Needs exercise cues?</label><div class="yes-no-group"><label><input type="radio" name="needsExerciseEncouragement" value="Yes"> Yes</label><label><input type="radio" name="needsExerciseEncouragement" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Footwear</div>
                        <div class="form-grid form-grid-3">
                            <div class="form-group"><label>Proper shoes?</label><div class="yes-no-group"><label><input type="radio" name="properShoes" value="Yes"> Yes</label><label><input type="radio" name="properShoes" value="No"> No</label></div></div>
                            <div class="form-group"><label>No shoes at night?</label><div class="yes-no-group"><label><input type="radio" name="nightNoShoes" value="Yes"> Yes</label><label><input type="radio" name="nightNoShoes" value="No"> No</label></div></div>
                            <div class="form-group"><label>Easy on/off shoes?</label><div class="yes-no-group"><label><input type="radio" name="easyShoes" value="Yes"> Yes</label><label><input type="radio" name="easyShoes" value="No"> No</label></div></div>
                        </div>
                    </div>

                    <div class="subsection">
                        <div class="subsection-title">Risk Level</div>
                        <input type="hidden" name="fallRiskLevel" id="fallRiskLevel">
                        <div class="risk-level">
                            <div class="risk-level-item low" onclick="selectRiskLevel('Low')"><input type="radio" name="riskLevelSelect" value="Low"><div class="level-name">Low Risk</div><div style="font-size:11px;color:#666;">Basic precautions</div></div>
                            <div class="risk-level-item moderate" onclick="selectRiskLevel('Moderate')"><input type="radio" name="riskLevelSelect" value="Moderate"><div class="level-name">Moderate Risk</div><div style="font-size:11px;color:#666;">Additional supervision</div></div>
                            <div class="risk-level-item high" onclick="selectRiskLevel('High')"><input type="radio" name="riskLevelSelect" value="High"><div class="level-name">High Risk</div><div style="font-size:11px;color:#666;">Constant supervision</div></div>
                        </div>
                        <div class="form-grid form-grid-3">
                            <div class="form-group"><label>Low Interventions</label><textarea name="lowInterventions" rows="2"></textarea></div>
                            <div class="form-group"><label>Moderate Interventions</label><textarea name="moderateInterventions" rows="2"></textarea></div>
                            <div class="form-group"><label>High Interventions</label><textarea name="highInterventions" rows="2"></textarea></div>
                        </div>
                        <div class="form-group full-width"><label>General Fall Interventions</label><textarea name="fallInterventions"></textarea></div>
                    </div>
                </div>
            </div>

            <!-- Verbal Communication -->
            <div class="section">
                <div class="section-header orange">Verbal Communication</div>
                <div class="section-content">
                    <div class="form-group"><label>Communication Ability</label><select name="communicationAbility"><option value="">Select...</option><option value="Excellent">Excellent</option><option value="Good">Good</option><option value="Fair">Fair</option><option value="Poor">Poor</option><option value="Non-verbal">Non-verbal</option></select></div>
                    <table class="care-table" style="margin-top: 15px;">
                        <thead><tr><th>Category</th><th>Likes</th><th>Dislikes</th></tr></thead>
                        <tbody>
                            <tr><td>Activity (Hobbies, Sports)</td><td><input type="text" name="activityLikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td><td><input type="text" name="activityDislikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td></tr>
                            <tr><td>Social (Music, Movies, TV)</td><td><input type="text" name="socialLikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td><td><input type="text" name="socialDislikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td></tr>
                            <tr><td>Facial (Makeup, Shaving)</td><td><input type="text" name="facialLikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td><td><input type="text" name="facialDislikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td></tr>
                            <tr><td>Other</td><td><input type="text" name="otherLikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td><td><input type="text" name="otherDislikes" style="width:100%;padding:6px;border:1px solid #D3D7DF;border-radius:4px;"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Chronic Physical Issues -->
            <div class="section">
                <div class="section-header">Chronic Physical Issues</div>
                <div class="section-content">
                    <table class="med-table">
                        <thead><tr><th>Pain Description</th><th>Onset</th><th>How Expressed</th><th>Remedy</th></tr></thead>
                        <tbody>
                            <tr><td><input type="text" name="pain1_desc"></td><td><input type="text" name="pain1_onset"></td><td><input type="text" name="pain1_expressed"></td><td><input type="text" name="pain1_remedy"></td></tr>
                            <tr><td><input type="text" name="pain2_desc"></td><td><input type="text" name="pain2_onset"></td><td><input type="text" name="pain2_expressed"></td><td><input type="text" name="pain2_remedy"></td></tr>
                            <tr><td><input type="text" name="pain3_desc"></td><td><input type="text" name="pain3_onset"></td><td><input type="text" name="pain3_expressed"></td><td><input type="text" name="pain3_remedy"></td></tr>
                            <tr><td><input type="text" name="pain4_desc"></td><td><input type="text" name="pain4_onset"></td><td><input type="text" name="pain4_expressed"></td><td><input type="text" name="pain4_remedy"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Food & Drink -->
            <div class="section">
                <div class="section-header orange">Food & Drink Preferences</div>
                <div class="section-content">
                    <div class="form-grid">
                        <div class="form-group"><label>Allergies?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasAllergies" value="Yes"> Yes</label><label><input type="radio" name="hasAllergies" value="No"> No</label></div><input type="text" name="allergiesList" placeholder="List"></div></div>
                        <div class="form-group"><label>Dietary restrictions?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasRestrictions" value="Yes"> Yes</label><label><input type="radio" name="hasRestrictions" value="No"> No</label></div><input type="text" name="restrictionsList" placeholder="List"></div></div>
                        <div class="form-group"><label>Foods liked</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasFoodLikes" value="Yes"> Yes</label><label><input type="radio" name="hasFoodLikes" value="No"> No</label></div><input type="text" name="foodLikesList" placeholder="List"></div></div>
                        <div class="form-group"><label>Foods disliked</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasFoodDislikes" value="Yes"> Yes</label><label><input type="radio" name="hasFoodDislikes" value="No"> No</label></div><input type="text" name="foodDislikesList" placeholder="List"></div></div>
                        <div class="form-group"><label>Dietitian recs?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasDietitianRecs" value="Yes"> Yes</label><label><input type="radio" name="hasDietitianRecs" value="No"> No</label></div><input type="text" name="dietitianRecsList" placeholder="List"></div></div>
                        <div class="form-group"><label>Needs thickener?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="needsThickener" value="Yes"> Yes</label><label><input type="radio" name="needsThickener" value="No"> No</label></div><input type="text" name="thickenerType" placeholder="Type"></div></div>
                        <div class="form-group"><label>Alcohol permitted?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="alcoholPermitted" value="Yes"> Yes</label><label><input type="radio" name="alcoholPermitted" value="No"> No</label></div><input type="text" name="alcoholRestrictions" placeholder="Restrictions"></div></div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 12px;"><label>Food Comments</label><textarea name="foodComments"></textarea></div>
                </div>
            </div>

            <!-- Emergency Info -->
            <div class="section">
                <div class="section-header">Emergency Information</div>
                <div class="section-content">
                    <div class="form-grid">
                        <div class="form-group"><label>Medical Card #</label><input type="text" name="medicalCard"></div>
                        <div class="form-group"><label>Medical Insurance</label><input type="text" name="medicalInsurance"></div>
                        <div class="form-group"><label>Emergency Contact Name</label><input type="text" name="medContactFirstName"></div>
                        <div class="form-group"><label>Emergency Contact Phone</label><input type="tel" name="medContactFirstPhone"></div>
                        <div class="form-group"><label>2nd Contact Name</label><input type="text" name="medContactLastName"></div>
                        <div class="form-group"><label>2nd Contact Phone</label><input type="tel" name="medContactLastPhone"></div>
                        <div class="form-group"><label>GP/Physician</label><input type="text" name="gpName"></div>
                        <div class="form-group"><label>GP Address</label><input type="text" name="gpAddress"></div>
                        <div class="form-group"><label>Neighbor Name</label><input type="text" name="neighborName"></div>
                        <div class="form-group"><label>Neighbor Phone</label><input type="tel" name="neighborPhone"></div>
                        <div class="form-group"><label>All Allergies</label><input type="text" name="allAllergies"></div>
                        <div class="form-group"><label>Client smokes?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="clientSmokes" value="Yes"> Yes</label><label><input type="radio" name="clientSmokes" value="No"> No</label></div><input type="text" name="smokingFrequency" placeholder="Frequency"></div></div>
                        <div class="form-group"><label>Has directives?</label><div class="yes-no-group"><label><input type="radio" name="hasDirectives" value="Yes"> Yes</label><label><input type="radio" name="hasDirectives" value="No"> No</label></div></div>
                    </div>
                </div>
            </div>

            <!-- Medical Status -->
            <div class="section">
                <div class="section-header orange">Medical Status/Diagnosis</div>
                <div class="section-content">
                    <div class="checkbox-group" style="margin-bottom: 15px;">
                        <label class="checkbox-item"><input type="checkbox" name="diagDementia"><span>Dementia</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagParkinsons"><span>Parkinson's</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagMS"><span>MS</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagDiabetes"><span>Diabetes</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagCancer"><span>Cancer</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagStroke"><span>Stroke</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagHeart"><span>Heart Disease</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagArthritis"><span>Arthritis</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagMacular"><span>Macular Degeneration</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="diagOther"><span>Other</span></label>
                    </div>
                    <div class="form-group full-width"><label>Medical Details</label><textarea name="medicalDetails" rows="3"></textarea></div>
                </div>
            </div>

            <!-- Medications -->
            <div class="section">
                <div class="section-header">Medications</div>
                <div class="section-content">
                    <div class="form-group"><label>Needs med reminders?</label><div class="yes-no-group"><label><input type="radio" name="needsMedReminders" value="Yes"> Yes</label><label><input type="radio" name="needsMedReminders" value="No"> No</label></div></div>
                    <div style="overflow-x: auto; margin-top: 12px;">
                        <table class="med-table">
                            <thead><tr><th>Name</th><th>Purpose</th><th>Dose</th><th>Route</th><th>Admin By</th><th>Frequency</th></tr></thead>
                            <tbody>
                                <tr><td><input type="text" name="med1_name"></td><td><input type="text" name="med1_purpose"></td><td><input type="text" name="med1_dose"></td><td><input type="text" name="med1_route"></td><td><input type="text" name="med1_admin"></td><td><input type="text" name="med1_freq"></td></tr>
                                <tr><td><input type="text" name="med2_name"></td><td><input type="text" name="med2_purpose"></td><td><input type="text" name="med2_dose"></td><td><input type="text" name="med2_route"></td><td><input type="text" name="med2_admin"></td><td><input type="text" name="med2_freq"></td></tr>
                                <tr><td><input type="text" name="med3_name"></td><td><input type="text" name="med3_purpose"></td><td><input type="text" name="med3_dose"></td><td><input type="text" name="med3_route"></td><td><input type="text" name="med3_admin"></td><td><input type="text" name="med3_freq"></td></tr>
                                <tr><td><input type="text" name="med4_name"></td><td><input type="text" name="med4_purpose"></td><td><input type="text" name="med4_dose"></td><td><input type="text" name="med4_route"></td><td><input type="text" name="med4_admin"></td><td><input type="text" name="med4_freq"></td></tr>
                                <tr><td><input type="text" name="med5_name"></td><td><input type="text" name="med5_purpose"></td><td><input type="text" name="med5_dose"></td><td><input type="text" name="med5_route"></td><td><input type="text" name="med5_admin"></td><td><input type="text" name="med5_freq"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Vitamins -->
            <div class="section">
                <div class="section-header orange">Vitamins/Supplements</div>
                <div class="section-content">
                    <table class="med-table">
                        <thead><tr><th>Name</th><th>Purpose</th><th>Per Day</th><th>Frequency</th></tr></thead>
                        <tbody>
                            <tr><td><input type="text" name="vit1_name"></td><td><input type="text" name="vit1_purpose"></td><td><input type="text" name="vit1_perday"></td><td><input type="text" name="vit1_freq"></td></tr>
                            <tr><td><input type="text" name="vit2_name"></td><td><input type="text" name="vit2_purpose"></td><td><input type="text" name="vit2_perday"></td><td><input type="text" name="vit2_freq"></td></tr>
                            <tr><td><input type="text" name="vit3_name"></td><td><input type="text" name="vit3_purpose"></td><td><input type="text" name="vit3_perday"></td><td><input type="text" name="vit3_freq"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Weekly Activities -->
            <div class="section">
                <div class="section-header">Weekly Activities</div>
                <div class="section-content">
                    <table class="med-table">
                        <thead><tr><th>Activity</th><th>Day(s)</th><th>Time(s)</th><th>Location</th></tr></thead>
                        <tbody>
                            <tr><td><input type="text" name="act1_type"></td><td><input type="text" name="act1_days"></td><td><input type="text" name="act1_times"></td><td><input type="text" name="act1_location"></td></tr>
                            <tr><td><input type="text" name="act2_type"></td><td><input type="text" name="act2_days"></td><td><input type="text" name="act2_times"></td><td><input type="text" name="act2_location"></td></tr>
                            <tr><td><input type="text" name="act3_type"></td><td><input type="text" name="act3_days"></td><td><input type="text" name="act3_times"></td><td><input type="text" name="act3_location"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Transportation -->
            <div class="section">
                <div class="section-header orange">Transportation</div>
                <div class="section-content">
                    <div class="subsection-title">Caregiver Transportation</div>
                    <div class="form-grid">
                        <div class="form-group"><label>Needs transport?</label><div class="yes-no-group"><label><input type="radio" name="needsCaregiverTransport" value="Yes"> Yes</label><label><input type="radio" name="needsCaregiverTransport" value="No"> No</label></div></div>
                        <div class="form-group"><label>Caregiver can drive?</label><div class="yes-no-group"><label><input type="radio" name="caregiverCanDrive" value="Yes"> Yes</label><label><input type="radio" name="caregiverCanDrive" value="No"> No</label></div></div>
                        <div class="form-group"><label>Transport Details</label><input type="text" name="caregiverDriveDetails"></div>
                        <div class="form-group"><label>Use company car?</label><div class="yes-no-group"><label><input type="radio" name="useCompanyCar" value="Yes"> Yes</label><label><input type="radio" name="useCompanyCar" value="No"> No</label></div></div>
                        <div class="form-group"><label>Use client's car?</label><div class="yes-no-group"><label><input type="radio" name="useOwnCar" value="Yes"> Yes</label><label><input type="radio" name="useOwnCar" value="No"> No</label></div></div>
                        <div class="form-group"><label>Caregiver Parking</label><input type="text" name="caregiverParking"></div>
                    </div>
                    <div class="subsection">
                        <div class="subsection-title">Client Vehicle</div>
                        <div class="form-grid">
                            <div class="form-group"><label>Client drives?</label><div class="yes-no-group"><label><input type="radio" name="clientDrives" value="Yes"> Yes</label><label><input type="radio" name="clientDrives" value="No"> No</label></div></div>
                            <div class="form-group"><label>Vehicle Model</label><input type="text" name="vehicleModel"></div>
                            <div class="form-group"><label>Year</label><input type="text" name="vehicleYear"></div>
                            <div class="form-group"><label>License Plate</label><input type="text" name="vehiclePlate"></div>
                            <div class="form-group"><label>Insurance Co</label><input type="text" name="insuranceCompany"></div>
                            <div class="form-group"><label>Policy #</label><input type="text" name="insurancePolicy"></div>
                            <div class="form-group"><label>Insurance Contact</label><input type="tel" name="insuranceContact"></div>
                            <div class="form-group"><label>Insurance Expiry</label><input type="date" name="insuranceExpiry"></div>
                            <div class="form-group"><label>Driving restrictions?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasDrivingRestrictions" value="Yes"> Yes</label><label><input type="radio" name="hasDrivingRestrictions" value="No"> No</label></div><input type="text" name="drivingRestrictions" placeholder="Details"></div></div>
                            <div class="form-group"><label>Roadside assistance?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasRoadsideAssistance" value="Yes"> Yes</label><label><input type="radio" name="hasRoadsideAssistance" value="No"> No</label></div><input type="text" name="roadsideCompany" placeholder="Company"></div></div>
                            <div class="form-group"><label>Parking Location</label><input type="text" name="parkingLocation"></div>
                            <div class="form-group"><label>Wheelchair permit?</label><div class="inline-field"><div class="yes-no-group"><label><input type="radio" name="hasWheelchairPermit" value="Yes"> Yes</label><label><input type="radio" name="hasWheelchairPermit" value="No"> No</label></div><input type="text" name="wheelchairPermitLocation" placeholder="Location"></div></div>
                            <div class="form-group"><label>Permit Details</label><input type="text" name="parkingPermitDetails"></div>
                        </div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 12px;"><label>Transport Notes</label><textarea name="transportNotes"></textarea></div>
                </div>
            </div>

            <!-- Services -->
            <div class="section">
                <div class="section-header">Required Services</div>
                <div class="section-content">
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" name="serviceHourly"><span>Hourly</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="serviceLiveIn24"><span>Live In 24h</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="serviceLiveOut24"><span>Live Out 24h</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="serviceOvernight"><span>Overnight</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="serviceRespite"><span>Respite</span></label>
                        <label class="checkbox-item"><input type="checkbox" name="serviceOnCall"><span>On Call</span></label>
                    </div>
                </div>
            </div>

            <!-- Schedule -->
            <div class="section">
                <div class="section-header orange">Visit Schedule</div>
                <div class="section-content">
                    <div class="schedule-grid">
                        <div class="schedule-day"><label>Mon</label><input type="checkbox" name="scheduleMon"><input type="time" name="scheduleMonTime1"><input type="time" name="scheduleMonTime2"></div>
                        <div class="schedule-day"><label>Tue</label><input type="checkbox" name="scheduleTue"><input type="time" name="scheduleTueTime1"><input type="time" name="scheduleTueTime2"></div>
                        <div class="schedule-day"><label>Wed</label><input type="checkbox" name="scheduleWed"><input type="time" name="scheduleWedTime1"><input type="time" name="scheduleWedTime2"></div>
                        <div class="schedule-day"><label>Thu</label><input type="checkbox" name="scheduleThu"><input type="time" name="scheduleThuTime1"><input type="time" name="scheduleThuTime2"></div>
                        <div class="schedule-day"><label>Fri</label><input type="checkbox" name="scheduleFri"><input type="time" name="scheduleFriTime1"><input type="time" name="scheduleFriTime2"></div>
                        <div class="schedule-day"><label>Sat</label><input type="checkbox" name="scheduleSat"><input type="time" name="scheduleSatTime1"><input type="time" name="scheduleSatTime2"></div>
                        <div class="schedule-day"><label>Sun</label><input type="checkbox" name="scheduleSun"><input type="time" name="scheduleSunTime1"><input type="time" name="scheduleSunTime2"></div>
                    </div>
                </div>
            </div>

            <!-- Care Plan Review -->
            <div class="section">
                <div class="section-header">Care Plan Review</div>
                <div class="section-content">
                    <div class="form-grid form-grid-2">
                        <div class="form-group"><label>Review Frequency</label><select name="reviewFrequency"><option value="">Select...</option><option value="Monthly">Monthly</option><option value="Quarterly">Quarterly</option><option value="Semi-annually">Semi-annually</option><option value="Annually">Annually</option><option value="As Needed">As Needed</option></select></div>
                        <div class="form-group"><label>Next Review Date</label><input type="date" name="nextReviewDate"></div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 12px;"><label>Care Plan Notes</label><textarea name="carePlanNotes" rows="3"></textarea></div>
                </div>
            </div>

            <input type="hidden" name="recordId" id="recordId">
            <input type="hidden" name="submissionTimestamp" id="submissionTimestamp">
        </form>

        <div class="form-actions">
            <button type="button" class="btn btn-primary" onclick="saveForm()">Submit & Save</button>
            <button type="button" class="btn btn-secondary" onclick="generatePDF()">Generate PDF</button>
            <button type="button" class="btn btn-outline" onclick="clearForm()">Clear Form</button>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal-overlay" id="searchModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Search & Edit Previous Forms</h3>
                <button class="modal-close" onclick="closeSearchModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="pinSection">
                    <p style="margin-bottom: 12px; color: #666; font-size: 13px;">Enter PIN to access edit mode</p>
                    <div class="form-group">
                        <label>PIN Code</label>
                        <input type="password" id="pinInput" placeholder="Enter PIN" maxlength="8">
                    </div>
                    <div id="pinError" style="color: #c62828; font-size: 12px; margin-top: 8px; display: none;">Invalid PIN. Try again.</div>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" onclick="verifyPin()">Verify PIN</button>
                </div>
                <div id="searchSection" style="display: none;">
                    <div class="form-group">
                        <label>Search by Client Name</label>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" id="searchInput" placeholder="Enter name..." style="flex: 1;">
                            <button class="btn btn-primary" onclick="searchForms()">Search</button>
                        </div>
                    </div>
                    <div id="searchLoading" class="loading" style="display: none;"><div class="spinner"></div><span>Searching...</span></div>
                    <div class="search-results" id="searchResults"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwRsoUMU-iiv18n1F04SUYa2BFlq32ZZHGLoP3QBtRFjMtFIWlEA2eN9qviTvUnCF2tyA/exec';
        const EDIT_PIN = '19731972';
        let isEditMode = false;
        let currentRecordId = null;

        document.addEventListener('DOMContentLoaded', function() {
            setTodayDate();
            
            document.getElementById('pinInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') verifyPin();
            });
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchForms();
            });
            
            document.querySelectorAll('.modal-overlay').forEach(function(modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) closeSearchModal();
                });
            });
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') closeSearchModal();
            });
        });

        function setTodayDate() {
            document.getElementById('evaluationDate').value = new Date().toISOString().split('T')[0];
        }

        function openSearchModal() {
            document.getElementById('searchModal').classList.add('show');
            document.getElementById('pinSection').style.display = 'block';
            document.getElementById('searchSection').style.display = 'none';
            document.getElementById('pinInput').value = '';
            document.getElementById('pinError').style.display = 'none';
            document.getElementById('pinInput').focus();
        }

        function closeSearchModal() {
            document.getElementById('searchModal').classList.remove('show');
        }

        function verifyPin() {
            const enteredPin = document.getElementById('pinInput').value.trim();
            console.log('Entered PIN:', enteredPin);
            console.log('Expected PIN:', EDIT_PIN);
            console.log('Match:', enteredPin === EDIT_PIN);
            
            if (enteredPin === EDIT_PIN) {
                document.getElementById('pinSection').style.display = 'none';
                document.getElementById('searchSection').style.display = 'block';
                document.getElementById('searchInput').value = '';
                document.getElementById('searchResults').innerHTML = '';
                document.getElementById('searchInput').focus();
                enableEditMode();
            } else {
                document.getElementById('pinError').style.display = 'block';
                document.getElementById('pinInput').value = '';
                document.getElementById('pinInput').focus();
            }
        }

        function enableEditMode() {
            isEditMode = true;
            document.getElementById('modeStatus').textContent = 'Edit Mode';
            document.getElementById('modeStatus').className = 'status-badge edit-mode';
        }

        function exitEditMode() {
            isEditMode = false;
            currentRecordId = null;
            document.getElementById('modeStatus').textContent = 'New Evaluation';
            document.getElementById('modeStatus').className = 'status-badge new-mode';
            document.getElementById('editBanner').classList.remove('show');
            clearForm();
            showToast('Returned to new evaluation mode', 'info');
        }

        function searchForms() {
            const query = document.getElementById('searchInput').value.trim();
            const resultsDiv = document.getElementById('searchResults');
            
            if (!query) {
                resultsDiv.innerHTML = '<p style="color:#666;text-align:center;padding:15px;">Enter a name to search</p>';
                return;
            }

            document.getElementById('searchLoading').style.display = 'flex';
            resultsDiv.innerHTML = '';

            const localResults = searchLocalStorage(query);
            
            fetch(SCRIPT_URL + '?action=search&query=' + encodeURIComponent(query))
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    document.getElementById('searchLoading').style.display = 'none';
                    if (data.success && data.records && data.records.length > 0) {
                        displaySearchResults(data.records.concat(localResults));
                    } else if (localResults.length > 0) {
                        displaySearchResults(localResults);
                    } else {
                        resultsDiv.innerHTML = '<p style="color:#666;text-align:center;padding:15px;">No records found</p>';
                    }
                })
                .catch(function(err) {
                    document.getElementById('searchLoading').style.display = 'none';
                    if (localResults.length > 0) {
                        displaySearchResults(localResults);
                    } else {
                        resultsDiv.innerHTML = '<p style="color:#666;text-align:center;padding:15px;">No records found</p>';
                    }
                });
        }

        function searchLocalStorage(query) {
            var results = [];
            var q = query.toLowerCase();
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                if (key.indexOf('evaluation_') === 0) {
                    try {
                        var rec = JSON.parse(localStorage.getItem(key));
                        var name = ((rec.firstName || '') + ' ' + (rec.lastName || '')).toLowerCase();
                        if (name.indexOf(q) !== -1) results.push(rec);
                    } catch (e) {}
                }
            }
            return results;
        }

        function displaySearchResults(records) {
            var resultsDiv = document.getElementById('searchResults');
            if (!records || records.length === 0) {
                resultsDiv.innerHTML = '<p style="color:#666;text-align:center;padding:15px;">No records found</p>';
                return;
            }
            var html = '';
            for (var i = 0; i < records.length; i++) {
                var rec = records[i];
                var name = ((rec.firstName || '') + ' ' + (rec.lastName || '')).trim() || 'Unknown';
                var date = rec.submissionTimestamp ? new Date(rec.submissionTimestamp).toLocaleDateString() : 'N/A';
                var dob = rec.dob || 'N/A';
                var addr = rec.streetAddress ? rec.streetAddress + ', ' + (rec.city || '') : 'N/A';
                html += '<div class="search-result-item" onclick="loadFormRecord(\'' + rec.recordId + '\')">' +
                    '<h4>' + name + '</h4>' +
                    '<p>Date: ' + date + ' | DOB: ' + dob + '</p>' +
                    '<p>Address: ' + addr + '</p></div>';
            }
            resultsDiv.innerHTML = html;
        }

        function loadFormRecord(recordId) {
            closeSearchModal();
            var localData = localStorage.getItem('evaluation_' + recordId);
            if (localData) {
                var rec = JSON.parse(localData);
                populateForm(rec);
                currentRecordId = recordId;
                showEditBanner(rec);
                showToast('Record loaded', 'success');
                return;
            }

            fetch(SCRIPT_URL + '?action=get&recordId=' + encodeURIComponent(recordId))
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.success && data.record) {
                        populateForm(data.record);
                        currentRecordId = recordId;
                        showEditBanner(data.record);
                        showToast('Record loaded', 'success');
                    } else {
                        showToast('Record not found', 'error');
                    }
                })
                .catch(function() {
                    showToast('Failed to load record', 'error');
                });
        }

        function showEditBanner(rec) {
            var name = ((rec.firstName || '') + ' ' + (rec.lastName || '')).trim() || 'Unknown';
            document.getElementById('editBannerText').textContent = 'Editing: ' + name;
            document.getElementById('editBanner').classList.add('show');
        }

        function populateForm(data) {
            var form = document.getElementById('evaluationForm');
            if (data.evaluationDate) {
                document.getElementById('evaluationDate').value = data.evaluationDate;
            }
            for (var key in data) {
                var el = form.querySelector('[name="' + key + '"]');
                if (!el) continue;
                if (el.type === 'checkbox') {
                    el.checked = data[key] === true || data[key] === 'true' || data[key] === 'on';
                } else if (el.type === 'radio') {
                    var radios = form.querySelectorAll('[name="' + key + '"]');
                    for (var i = 0; i < radios.length; i++) {
                        radios[i].checked = radios[i].value === data[key];
                    }
                } else {
                    el.value = data[key] || '';
                }
            }
            if (data.fallRiskLevel) selectRiskLevel(data.fallRiskLevel);
            document.getElementById('recordId').value = data.recordId || '';
            document.getElementById('submissionTimestamp').value = data.submissionTimestamp || '';
        }

        function selectRiskLevel(level) {
            document.getElementById('fallRiskLevel').value = level;
            var items = document.querySelectorAll('.risk-level-item');
            for (var i = 0; i < items.length; i++) {
                items[i].classList.remove('selected');
            }
            var sel = document.querySelector('.risk-level-item.' + level.toLowerCase());
            if (sel) {
                sel.classList.add('selected');
                var radio = sel.querySelector('input');
                if (radio) radio.checked = true;
            }
        }

        function getFormData() {
            var form = document.getElementById('evaluationForm');
            var formData = new FormData(form);
            var data = {};
            formData.forEach(function(val, key) { data[key] = val; });
            var checkboxes = form.querySelectorAll('input[type="checkbox"]');
            for (var i = 0; i < checkboxes.length; i++) {
                data[checkboxes[i].name] = checkboxes[i].checked;
            }
            data.evaluationDate = document.getElementById('evaluationDate').value;
            if (!data.recordId) data.recordId = 'EVAL_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            if (!data.submissionTimestamp) data.submissionTimestamp = new Date().toISOString();
            return data;
        }

        function saveForm() {
            var data = getFormData();
            if (!data.firstName || !data.lastName) {
                showToast('Please enter client name', 'error');
                return;
            }
            showToast('Saving...', 'info');

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'save', data: data })
            })
            .then(function() {
                localStorage.setItem('evaluation_' + data.recordId, JSON.stringify(data));
                showToast('Saved successfully!', 'success');
                document.getElementById('recordId').value = data.recordId;
                document.getElementById('submissionTimestamp').value = data.submissionTimestamp;
                if (isEditMode) {
                    currentRecordId = data.recordId;
                    showEditBanner(data);
                }
            })
            .catch(function() {
                localStorage.setItem('evaluation_' + data.recordId, JSON.stringify(data));
                showToast('Saved locally', 'success');
            });
        }

        function clearForm() {
            document.getElementById('evaluationForm').reset();
            document.getElementById('recordId').value = '';
            document.getElementById('submissionTimestamp').value = '';
            document.getElementById('fallRiskLevel').value = '';
            var items = document.querySelectorAll('.risk-level-item');
            for (var i = 0; i < items.length; i++) items[i].classList.remove('selected');
            setTodayDate();
            if (!isEditMode) document.getElementById('editBanner').classList.remove('show');
        }

        function generatePDF() {
            var data = getFormData();
            var name = ((data.firstName || 'Client') + '_' + (data.lastName || 'Unknown')).replace(/\s+/g, '_');
            var date = new Date().toISOString().split('T')[0];
            var filename = 'HomeCare_Eval_' + name + '_' + date + '.pdf';
            showToast('Generating PDF...', 'info');
            var element = document.querySelector('.container');
            var opt = {
                margin: [8, 8, 8, 8],
                filename: filename,
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };
            html2pdf().set(opt).from(element).save().then(function() {
                showToast('PDF generated!', 'success');
            }).catch(function() {
                showToast('PDF failed', 'error');
            });
        }

        function showToast(msg, type) {
            var toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = 'toast ' + (type || 'info') + ' show';
            setTimeout(function() { toast.classList.remove('show'); }, 3000);
        }
    </script>
</body>
</html>
